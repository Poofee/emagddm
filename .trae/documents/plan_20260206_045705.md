## Maxwell数据管理模块单元测试完善计划

### 测试目标模块

| 模块                      | 测试重点           |
| ----------------------- | -------------- |
| **project\_validator**  | 数据校验、关联验证、错误报告 |
| **association\_map**    | 关联关系管理、悬空引用检测  |
| **format\_adapter**     | 格式检测、适配器工厂     |
| **fragmented\_storage** | 分片读写、校验和验证     |
| **operation\_logger**   | 日志记录、类型转换、导出   |
| **version\_manager**    | 版本创建、版本比较、回滚   |

### 实施步骤

#### 1. 创建测试文件 `test_tool_modules.cpp`

* 使用Google Test框架

* 包含所有新模块的单元测试

* 每个模块独立测试类

#### 2. 测试用例设计

* **project\_validator测试**

  * 材料参数校验（磁导率、电导率、密度）

  * BH曲线校验（单调性、范围检查）

  * 铁损参数校验

  * 边界关联校验

  * 激励关联校验

* **association\_map测试**

  * Entity-Material关联增删改查

  * Entity-Boundary关联一对多

  * Entity-Excitation关联

  * 悬空引用检测

  * 序列化/反序列化

* **format\_adapter测试**

  * 格式自动检测

  * 适配器工厂获取

  * XML/JSON格式支持

* **fragmented\_storage测试**

  * 创建/打开存储

  * 分片读写

  * 校验和验证

  * 大文件分片测试

* **operation\_logger测试**

  * 各类操作日志记录

  * 时间戳格式化

  * 日志导出XML

* **version\_manager测试**

  * 版本创建

  * 版本列表获取

  * 版本比较

#### 3. 更新CMakeLists.txt

* 添加test\_tool\_modules编译配置

* 链接GTest框架

* 注册到CTest测试套件

### 预期结果

* 新增1个测试文件（约800-1000行）

* 6个测试类，30+测试用例

* 所有测试通过

* 集成到gtest自动化测试

