# Maxwell类电磁模块（含Project数据管理）AI落地开发计划（仅保留项目数据读取与保存）

核心目标：聚焦Project数据全生命周期管理，实现Maxwell项目文件（.aedt/.aedtz/.xml/.amat）导入、自研自定义XML及其他格式读取、.emf项目包（JSON+二进制）保存/加载/备份，构建统一的电磁模块自有数据模型，确保数据读取准确、保存可靠、格式兼容，AI全程承担核心开发、测试、优化任务，达成工程化落地的项目数据管理能力。

总周期：3.7个月（分5阶段，含缓冲期，删除前处理阶段，可根据AI开发效率灵活调整）

核心约束：1. 严格对齐Maxwell材料库、边界类型、Project文件核心节点规范；2. 不破坏现有框架解耦设计（仅涉及数据IO相关适配）；3. AI开发任务可落地、可量化、可验收；4. 优先保障工程化易用性（配置化、批量处理、格式兼容）。

# 第一阶段：基础准备与架构固化（第1个月）

## 阶段目标

完成开发环境搭建、Maxwell Project文件解析规则梳理、Project数据模型固化、基础工具类开发，为后续数据读取与保存模块开发奠定基础，确保AI开发方向不偏离Maxwell格式兼容要求。

## AI核心开发任务

1. Maxwell Project文件解析规则梳理（重点聚焦数据读取相关）

2. 拆解Maxwell Project文件核心结构：.aedt/.aedtz文件目录结构、XML导出格式节点、.amat材料库格式，明确需解析的核心数据（几何/材料/边界/激励/网格/求解配置，不涉及求解逻辑）及映射规则；补充梳理Maxwell自动保存文件（.aedt.auto）结构、参数化扫描相关元数据结构，明确此类文件的读取适配规则（仅读取项目数据，不涉及求解结果恢复）；同步梳理Maxwell 2024版本及兼容版本的文件格式差异，确保读取模块适配多版本文件。

3. 制定「Maxwell数据-自研数据模型」对齐表，明确每类数据的解析标准、格式映射要求（如材料参数、边界类型与Maxwell完全一致）；补充对齐磁芯损耗模型数据、时变激励波形参数、HPC配置参数、脚本相关元数据、附属资源文件（.dat/.txt/coreloss_user.data）的映射规则，确保Maxwell专属数据无遗漏。

4. 梳理自研自定义XML格式设计规范，明确格式结构、节点定义，确保与Maxwell解析后的数据格式可无缝兼容，支持自定义扩展；补充规范Maxwell专属数据（如BH曲线、磁芯损耗系数、辐射边界参数）的XML节点定义，确保自研格式可准确存储此类数据。

5. 开发环境与工具搭建

6. 搭建C++工程化开发环境（适配现有有限元框架数据IO相关接口），集成序列化工具（JSON/YAML/二进制）、网格解析工具（支持STL/STEP/IGES/Mesh/SAT/Parasolid）、调试工具；补充集成Maxwell附属资源文件（.dat/.txt/coreloss_user.data）解析工具，适配Maxwell材料库、激励波形相关文件的读取需求。

7. 搭建测试环境，准备Maxwell标准测试用例（2D/3D/AXIS）、Project导出文件（.aedt/.aedtz/.xml/.amat/.aedt.auto）、几何/网格文件（含Parasolid格式、用户自定义原语UDP相关几何文件）、附属资源文件（BH曲线.dat、磁芯损耗coreloss_user.data、自定义激励波形.txt），用于验证数据读取准确性；补充准备多版本Maxwell测试用例，验证读取模块的版本兼容性。

8. 配置代码规范（对齐现有框架）、单元测试模板、交付物模板（代码注释、文档、测试报告）。

9. 数据模型与适配层设计

10. 梳理现有框架数据IO相关接口，设计数据管理适配层（DataIOAdapter），定义统一接口，实现数据读取与保存模块与现有框架的无缝对接，避免直接修改框架核心代码；补充适配Maxwell专属数据（磁芯损耗模型、HPC配置、脚本元数据）的接口定义，确保此类数据可正常读取并同步至核心数据模型。

11. 固化Project数据分层模型，完善ISerializable序列化接口，明确各数据类（ProjectMeta、MaterialData、BoundaryData、GeometryData、ExcitationData、MeshData、SolverSettings）的成员变量、序列化/反序列化逻辑，对标Maxwell数据规范，预留自定义XML格式适配接口；补充完善MaterialData中磁芯损耗模型参数、各向异性材料参数的成员变量，ExcitationData中时变激励波形参数、线圈串并联参数的成员变量，SolverSettings中HPC配置参数、收敛准则细节参数的成员变量，ProjectMeta中Maxwell软件版本信息、脚本元数据的成员变量，确保覆盖Maxwell专属数据。

12. 基础工具类开发

13. 开发全局枚举工具（DimType、FieldType、MatType、BndType等），统一命名规范，对齐Maxwell术语；补充扩展枚举类型，新增磁芯损耗模型类型、激励波形类型、HPC并行模式类型、边界细分类型（如Perfect H/Perfect E对称边界），完全对齐Maxwell术语规范。

14. 开发异常处理工具，定义统一异常类型（ProjectException、DataReadException、DataSaveException等），制定异常提示规范（重点覆盖文件损坏、格式不支持、数据同步失败等场景）；补充新增异常类型（如附属资源读取失败、版本不兼容、磁芯损耗数据异常、HPC配置解析失败），完善异常提示细节，贴合Maxwell数据读取场景。

15. 开发ID生成工具，实现材料/几何/边界/单元/Project的全局唯一ID生成（兼容Maxwell ID规则，便于导入导出数据匹配）；补充适配Maxwell用户自定义原语（UDP）几何实体的ID生成规则，确保UDP相关几何数据读取后ID匹配无误。

## 技术要求

1. 数据解析规则覆盖Maxwell低频核心数据类型，无遗漏关键数据（如材料BH曲线、边界参数、几何拓扑）；补充要求覆盖Maxwell磁芯损耗模型数据、时变激励波形数据、HPC配置数据、脚本元数据、附属资源数据、自动保存文件数据，无遗漏Maxwell专属数据。

2. 适配层接口与现有框架数据IO接口完全兼容，调用无冲突，支持后续数据读取与保存模块无缝对接；补充要求适配层接口支持Maxwell专属数据的读取与同步，接口扩展性强，可兼容Maxwell多版本文件格式。

3. 数据类成员变量完整，序列化/反序列化无数据丢失，支持JSON/YAML/二进制三种格式，预留自定义XML格式适配能力；补充要求Maxwell专属数据（磁芯损耗、HPC配置等）的序列化/反序列化无精度损失，BH曲线、磁芯损耗系数等参数读取准确率≥99%。

## 交付物

1. Maxwell数据-自研数据模型对齐表、Project文件解析规则文档（含.aedt/.aedtz/.amat/.xml/.aedt.auto格式）、自研自定义XML格式规范；补充交付Maxwell多版本格式差异文档、附属资源文件解析规则文档、磁芯损耗/激励波形/HPC配置数据映射细则。

2. 开发/测试环境配置文档、代码规范、模板文件；补充交付附属资源文件解析工具配置文档、多版本测试用例说明文档。

3. 数据IO适配层设计文档、Project数据模型设计文档；补充交付Maxwell专属数据适配接口设计文档、数据类成员变量扩展说明文档。

4. 全局枚举工具、异常处理工具、ID生成工具的代码及单元测试用例（覆盖率≥90%）；补充交付新增枚举类型、异常类型、ID生成规则的测试用例，确保Maxwell专属数据相关工具可用。

## 风险与应对

风险：Maxwell Project文件（.aedt/.aedtz）解析规则不明确；应对：优先使用Maxwell官方导出的XML格式，逐步拆解.aedt/.aedtz文件目录结构与节点，建立测试用例验证解析准确性，对接Maxwell官方文档补充解析逻辑。补充风险1：Maxwell多版本文件格式存在差异，导致读取异常；应对：梳理各版本格式差异，在解析模块中添加版本识别逻辑，根据版本自动适配解析规则，多版本测试用例全覆盖。补充风险2：附属资源文件（.dat/.txt）格式不统一，读取失败；应对：制定Maxwell附属资源文件的格式校验规则，针对不同类型附属资源开发专属解析逻辑，添加读取失败的异常提示与降级处理（跳过无效附属资源，提示用户）。

# 第二阶段：2D/3D/AXIS统一数据抽象架构开发（第0.8个月）

## 阶段目标

完成DimensionAbstraction抽象基类、2D/3D/AXIS派生类开发（仅聚焦数据适配），实现不同维度数据接口统一，支持维度一键切换，对接Project数据模型，为数据读取模块的几何、网格数据适配提供支撑。

## AI核心开发任务

1. 抽象基类（DimensionAbstraction）开发（仅保留数据相关接口）

2. 实现抽象基类，定义数据相关纯虚接口（几何数据适配、网格数据适配、数据格式转换、维度相关数据校验），贴合数据读取与保存流程；补充定义Maxwell专属几何数据（如UDP几何）、网格数据（如蒙皮深度网格、损耗自适应相关网格元数据）的适配接口，确保此类数据可按维度适配。

3. 封装基类通用逻辑：数据参数校验、日志输出、数据IO适配层对接、异常捕获，减少派生类冗余代码；补充封装Maxwell专属数据（如边界细分参数、网格质量指标细节）的校验逻辑，确保数据读取后维度适配的准确性。

4. 完善基类成员变量，关联维度类型、场量类型，对接Project数据模型（GeometryData、MeshData），预留与Project数据读取模块的对接接口；补充关联Maxwell维度相关的附属数据（如2D轴对称旋转因子、3D蒙皮深度参数），确保维度适配时此类数据同步匹配。

5. 维度派生类开发（D2Dimension、D3Dimension、AxisDimension）

6. D2Dimension（2D）：实现所有数据相关纯虚接口，适配2D几何拓扑（面-边-节点）、2D网格数据解析与格式转换，对接2D数据读取逻辑；补充适配2D对称边界（Perfect H/Perfect E）相关数据、2D蒙皮深度网格数据的适配逻辑，贴合Maxwell 2D数据规范。

7. D3Dimension（3D）：实现所有数据相关纯虚接口，适配3D几何拓扑（体-面-边-节点）、3D网格数据解析与格式转换；补充适配3D辐射边界、主从周期性边界相关数据、3D损耗自适应网格元数据的适配逻辑，支持Parasolid格式几何数据的维度适配。

8. AxisDimension（2D轴对称）：继承D2Dimension，重写旋转相关数据适配接口（几何拓扑旋转适配、网格数据旋转转换、3D数据还原适配），复用2D核心数据逻辑；补充适配Maxwell轴对称旋转因子相关数据的解析与适配，确保与Maxwell轴对称数据格式偏差≤1e-6。

9. 维度工厂类与切换逻辑开发

10. 开发DimensionFactory单例工厂类，实现create_dim、create_dim_from_config接口，支持按枚举/配置文件创建维度实例，返回抽象基类指针；补充支持根据Maxwell项目文件中的维度标识（读取自Project元数据）自动创建对应维度实例，提升读取流程自动化程度。

11. 实现维度一键切换逻辑，确保修改配置文件的dimension字段后，无需修改上层代码，自动适配对应的派生类数据接口；补充确保维度切换时，Maxwell专属维度数据（如旋转因子、蒙皮参数）同步适配，无数据错乱。

12. 开发维度数据适配测试工具，验证不同维度的几何、网格数据解析准确性、格式转换一致性；补充测试Maxwell专属几何/网格数据（UDP、蒙皮网格、损耗自适应网格）的维度适配准确性，覆盖多版本Maxwell维度数据场景。

## 技术要求

1. 抽象基类数据接口全覆盖数据读取与保存所需的维度适配场景，派生类实现无遗漏，接口调用无异常；补充要求接口支持Maxwell专属几何/网格数据的适配，适配逻辑与Maxwell原生维度数据处理规则一致。

2. 轴对称派生类复用2D数据代码≥90%，3D数据还原适配准确，与Maxwell轴对称数据格式偏差≤1e-6；补充要求轴对称维度适配时，旋转因子相关数据读取与转换无偏差，适配后的数据可准确映射至自研数据模型。

3. 维度切换无代码修改，配置文件生效后，几何、网格数据解析与转换自动适配对应维度；补充要求维度切换时，Maxwell专属边界、网格元数据同步适配，无数据丢失或错乱。

## 交付物

1. 维度抽象基类、3个维度派生类（仅数据适配相关）的完整代码及注释；补充交付Maxwell专属几何/网格数据适配相关的接口实现代码、注释。

2. DimensionFactory工厂类代码、维度切换逻辑代码；补充交付根据Maxwell项目维度标识自动创建实例的相关代码。

3. 维度数据适配测试工具、单元测试用例（覆盖率≥95%）、测试报告；补充交付Maxwell专属几何/网格数据维度适配的测试用例、对比测试报告（与Maxwell原生数据对比）。

4. 2D/3D/AXIS维度数据适配文档，含接口说明、维度差异实现细节；补充交付Maxwell专属数据维度适配说明、多版本维度数据适配差异文档。

## 风险与应对

风险：轴对称数据还原适配偏差；应对：参考Maxwell轴对称数据格式规范，增加轴对称旋转因子校验，用Maxwell标准算例对比调试数据转换逻辑。补充风险：Maxwell专属网格数据（蒙皮深度、损耗自适应）维度适配偏差；应对：参考Maxwell网格数据处理规范，提取网格元数据中的维度相关参数，针对性开发适配逻辑，用标准网格测试用例逐一场景调试。

# 第三阶段：核心业务数据模块开发（材料/边界/激励，第0.7个月）

## 阶段目标

完成材料、边界、激励三大核心业务数据模块开发，实现Maxwell风格的材料库、全类型边界/激励数据管理，对接Project数据模型，与维度数据抽象架构无缝联动，支持材料/边界/激励数据的添加、修改、删除、关联，为Project数据读取模块提供数据存储与调用支撑。

## AI核心开发任务

1. 材料管理模块（MaterialManager）开发

2. 落地MaterialData、MaterialDataList数据类，实现ISerializable接口，支持线性/非线性/各向同性/各向异性材料的结构化存储，对接Maxwell材料参数（含BH曲线、温度相关参数、损耗模型）；补充支持Maxwell磁芯损耗模型（斯坦梅茨方程）的结构化存储，新增磁芯损耗系数、coreloss_user.data文件关联参数的存储，支持BH曲线数据的平滑处理参数读取与存储，完全对齐Maxwell材料属性规范。

3. 开发MaterialManager单例类，实现材料添加、修改、删除、查询、批量导入/导出接口，支持按材料ID/名称快速查找，预留与MaterialPropertyReader模块的对接接口；补充实现Maxwell附属材料文件（.amat/.dat/coreloss_user.data）的关联查询、批量导入接口，支持按磁芯损耗类型、材料属性范围筛选材料，适配读取模块的材料数据同步需求。

4. 内置Maxwell标准材料库（铜、铝、硅钢、永磁体等），参数与Maxwell完全一致，支持B-H曲线导入（.dat/.txt/.amat）、样条插值；补充内置Maxwell标准磁芯损耗模型参数，支持coreloss_user.data自定义磁芯损耗数据的导入与解析，插值算法参考Maxwell逻辑，确保插值误差≤1e-6。

5. 实现材料与几何实体的关联逻辑，支持按实体ID批量赋值材料，建立「EntityID→MaterialID」映射，对接Project映射表；补充支持Maxwell用户自定义原语（UDP）几何实体与材料的关联逻辑，确保UDP几何数据读取后可正常关联材料。

6. 边界管理模块（BoundaryManager）开发

7. 落地BoundaryData、BoundaryDataList数据类，实现ISerializable接口，支持Maxwell全类型边界（Dirichlet、Neumann、Periodic、主从、奇偶对称、气球、阻抗、辐射边界等），含边界参数、关联几何ID、适配场型；补充支持Maxwell对称边界（Perfect H/Perfect E）、无限球辐射边界的专属参数存储，新增边界细分参数、周期性映射参数的存储，完全对齐Maxwell边界属性规范。

8. 开发BoundaryManager单例类，实现边界添加、修改、删除、查询、激活/关闭接口，支持边界冲突检测（同一几何多边界冲突），预留与BoundaryConditionParser模块的对接接口；补充实现Maxwell边界专属参数的查询、修改接口，优化边界冲突检测逻辑（新增对称边界、辐射边界的冲突检测），适配读取模块的边界数据同步需求。

9. 实现边界与几何实体的关联逻辑，支持按面/边/体ID批量添加边界，建立「EntityID→BoundaryIDList」映射，对接Project映射表；补充支持Maxwell主从边界的周期性映射关联、对称边界的对称面关联，确保读取模块解析的边界关联数据可准确同步。

10. 适配维度数据抽象架构，自动将边界数据按维度适配（如3D边界适配体/面，2D适配面/边）；补充适配Maxwell不同维度下边界参数的差异（如2D与3D辐射边界参数差异），确保维度适配后边界数据与Maxwell原生数据一致。

11. 激励管理模块（ExcitationManager）开发

12. 落地ExcitationData、ExcitationDataList数据类，实现ISerializable接口，支持Maxwell全类型激励（电流源、电压源、磁通源、时变激励、绕组激励等），含线圈绕组定义、并联/串联连接、运动相关激励参数；补充支持Maxwell时变激励波形（正弦/方波/自定义）的参数存储（采样点、频率、幅值），新增线圈绕组串并联细节参数、外部电路元件关联参数（仅存储，不求解）、自定义激励波形文件（.txt）关联参数的存储，完全对齐Maxwell激励属性规范。

13. 开发ExcitationManager单例类，实现激励添加、修改、删除、查询接口，支持时变激励波形（正弦/方波/自定义）导入，预留与ExcitationDataReader模块的对接接口；补充实现Maxwell激励波形文件（.txt）的关联查询、批量导入接口，支持按激励类型、频率范围筛选激励，适配读取模块的激励数据同步需求。

14. 实现线圈专属建模数据管理，支持多匝线圈、分层线圈参数存储，适配Maxwell线圈建模数据逻辑；补充支持线圈绕组的连接方式细节（串并联支路数、绕组函数）、运动激励的旋转/平移参数存储，确保读取模块解析的线圈数据可准确存储。

15. 实现激励与几何实体的关联逻辑，支持按区域/边界添加激励，建立「EntityID→ExcitationID」映射；补充支持Maxwell时变激励与波形文件的关联、线圈激励与几何区域的精准关联，确保读取模块解析的激励关联数据可准确同步。

16. 模块联动与测试

17. 实现三大模块与维度数据抽象架构的联动，确保材料/边界/激励按维度自动适配；补充实现三大模块与Maxwell专属数据（磁芯损耗、边界细分、激励波形）的联动，确保数据同步无误。

18. 开发单元测试用例，覆盖材料库调用、边界冲突检测、激励参数管理、几何关联等场景，覆盖率≥95%；补充测试Maxwell专属数据（磁芯损耗、辐射边界、时变激励）的存储、查询、同步场景，新增与Maxwell标准数据的对比测试。

19. 用Maxwell标准材料/边界/激励数据测试用例，验证参数一致性、数据存储正确性；补充用Maxwell多版本标准用例、自定义附属资源用例（如自定义波形、自定义磁芯损耗数据）测试，验证模块兼容性。

## 技术要求

1. 材料库参数与Maxwell完全一致，非线性B-H曲线插值误差≤1e-6，各向异性参数存储准确；补充要求磁芯损耗模型参数、温度相关参数存储准确，coreloss_user.data数据解析无偏差，材料附属文件关联无误。

2. 边界类型全覆盖Maxwell低频核心边界，冲突检测准确，边界数据与几何实体关联无误；补充要求对称边界、辐射边界的专属参数存储准确，主从边界的周期性映射关联无误，边界适配维度后参数无偏差。

3. 激励支持时变波形数据存储，线圈建模参数准确，激励数据与几何实体关联无误；补充要求时变激励波形参数、线圈串并联细节参数存储准确，激励与附属波形文件关联无误，外部电路元件关联参数存储完整。

4. 三大模块接口统一，支持批量操作，与Project数据模型无缝对接，可正常序列化/反序列化，支持接收Project数据读取模块导入的数据；补充要求模块支持Maxwell专属数据的批量同步，接口可兼容Maxwell多版本数据格式。

## 交付物

1. 材料/边界/激励管理模块完整代码（数据类+管理器）及注释；补充交付Maxwell专属数据（磁芯损耗、辐射边界、时变激励）相关的代码、注释。

2. Maxwell标准材料库数据文件、B-H曲线示例文件；补充交付Maxwell标准磁芯损耗模型参数文件、coreloss_user.data示例文件、自定义激励波形示例文件（.txt）。

3. 单元测试用例、功能测试报告、Maxwell对比测试报告；补充交付Maxwell专属数据的测试用例、多版本兼容性测试报告、附属资源文件关联测试报告。

4. 三大模块接口文档、使用手册，含与Project数据读取模块的对接说明；补充交付Maxwell专属数据的接口使用说明、附属资源文件导入导出说明。

## 风险与应对

风险：非线性材料插值不准确、线圈参数数据存储偏差；应对：优化插值算法，参考Maxwell插值逻辑，用标准算例调试数据存储与读取一致性，确保参数无偏差。补充风险1：Maxwell磁芯损耗模型数据、时变激励波形数据存储偏差；应对：严格对齐Maxwell材料、激励参数规范，提取核心参数进行结构化存储，用自定义磁芯损耗、自定义波形测试用例逐参数调试，确保无偏差。补充风险2：边界冲突检测遗漏（如对称边界、辐射边界）；应对：梳理Maxwell全类型边界的冲突规则，完善冲突检测逻辑，覆盖所有边界类型的冲突场景，多边界组合测试用例全覆盖。

# 第四阶段：Project文件IO与Maxwell兼容开发（含数据读取模块，第1个月）

## 阶段目标

完成ProjectManager单例管理器开发，实现.emf项目包（JSON+二进制）的全链路IO，重点开发Maxwell项目数据读取模块，支持Maxwell Project文件（.aedt/.aedtz/.xml/.amat）导入、自研自定义XML格式及其他格式读取，实现读取数据后同步保存到电磁模块自有数据模型，支持框架项目导出为Maxwell兼容格式，实现Project数据全生命周期管理（创建/加载/保存/增量修改/备份）。

## AI核心开发任务

1. ProjectManager单例管理器开发

2. 实现ProjectManager核心功能：创建新项目、加载项目、保存项目（全量/增量）、关闭项目、导入/导出项目，对接Project数据分层模型，新增数据读取模块对接逻辑；补充实现Maxwell自动保存文件（.aedt.auto）的加载逻辑（仅读取项目数据，不恢复求解结果）、参数化扫描元数据的读取与管理逻辑，新增Maxwell专属数据（磁芯损耗、HPC配置等）的同步逻辑。

3. 开发数据缓存逻辑，加载项目后缓存所有数据到内存，操作基于内存，保存时再写入文件，提升操作效率；补充优化Maxwell大体积附属资源文件（如海量BH曲线.dat）的缓存逻辑，采用分片缓存，减少内存占用。

4. 实现数据修改状态跟踪（新增/修改/删除），增量保存时仅更新修改的数据（明文节点+二进制数据块），优化大项目保存速度；补充跟踪Maxwell专属数据、附属资源文件的修改状态，确保增量保存时此类数据同步更新，无遗漏。

5. 实现数据校验逻辑，加载/保存时校验数据合法性（材料参数、边界关联、网格拓扑），抛出统一异常并提示解决方案；补充新增Maxwell专属数据的校验逻辑（磁芯损耗参数物理合理性、激励波形参数有效性、HPC配置规范性、附属资源文件完整性），完善校验报告，明确指出Maxwell专属数据的无效位置与原因。

6. 实现模块同步功能，加载数据后自动将材料/边界/激励/维度/几何数据同步到对应管理器（MaterialManager、BoundaryManager等），无需上层手动同步；补充同步Maxwell脚本元数据、HPC配置数据、附属资源文件关联数据到对应模块，确保全量数据同步无误。

7. .emf项目包开发（JSON+二进制混合存储）

8. 开发.emf项目包打包/解包工具，实现project.json（明文）、data.bin（二进制）、resources/（资源文件夹）的自动打包/解包；补充完善resources/文件夹的分类管理，新增material_res/（材料附属文件）、excitation_res/（激励波形文件）、solver_res/（HPC配置相关文件）子目录，分别存储Maxwell各类附属资源文件，确保目录结构与Maxwell项目文件对齐。

9. 完善project.json结构，包含配置元数据、核心业务数据、二进制数据块索引、关联映射表，支持明文编辑；补充新增Maxwell软件版本信息、脚本元数据、HPC配置参数、磁芯损耗模型类型等节点，确保Maxwell专属数据可明文编辑、查询。

10. 开发二进制数据块管理逻辑，将网格拓扑、几何数据等大体积数据分块存储，通过索引实现随机读取，优化加载速度；补充将Maxwell大体积附属资源文件（如千万级采样点的激励波形.txt）分块存储，同步生成索引，提升读取速度。

11. 实现资源文件夹管理，存储外部关联文件（B-H曲线、自定义波形、.amat材料库文件），采用相对路径，保证项目可移植性；补充实现Maxwell coreloss_user.data、UDP几何相关附属文件的存储与关联管理，支持此类文件的相对路径映射，确保移植后可正常读取。

12. Maxwell项目数据读取模块开发（核心新增）

13. 模块整体架构搭建：构建MaxwellDataReader核心模块，包含7个子模块，形成完整的数据接口层，结构如下：          
MaxwellDataReader/         
├── MaxwellProjectParser/     # 项目文件解析（核心调度）
├── GeometryExtractor/        # 几何模型提取          
├── MaterialPropertyReader/   # 材料属性读取          
├── BoundaryConditionParser/  # 边界条件解析          
├── ExcitationDataReader/     # 激励源数据读取
├── MeshDataExtractor/        # 网格数据提取（可选）          
└── SolverSettingsAdapter/    # 求解设置适配（仅读取配置，不涉及求解）        
      

14. 电磁模块自有数据模型完善：定义统一的MaxwellDataModel数据模型，整合所有读取的数据，实现ISerializable接口，支持数据保存与调用，模型结构贴合读取模块输出格式，具体包含：          
- 项目元数据（ProjectMeta）：仿真类型、维度、版本等；补充Maxwell软件版本、脚本元数据、参数化扫描元数据；          
- 几何数据（GeometryData）：顶点、边、面、体拓扑及变换矩阵；补充UDP几何数据、Parasolid格式几何相关元数据；        
- 材料数据（MaterialDataList）：所有材料属性、BH曲线、损耗模型等；补充磁芯损耗模型参数、coreloss_user.data关联参数；          
- 边界数据（BoundaryDataList）：所有边界类型、关联几何、参数配置；补充对称边界/辐射边界专属参数、周期性映射参数；          
- 激励数据（ExcitationDataList）：绕组、电流/电压源、运动激励等；补充时变激励波形参数、线圈串并联细节、外部电路关联参数、自定义波形文件关联参数；          
- 网格数据（MeshData，可选）：体/面网格、质量指标、边界层信息；补充蒙皮深度网格元数据、损耗自适应网格元数据；          
- 求解设置（SolverSettings）：收敛准则、求解器类型、输出变量等（仅存储，不涉及求解）；补充HPC配置参数（并行模式、核心数量等）、收敛准则细节参数。        
      

15. 各子模块详细开发（C++实现，对齐用户提供的功能设计，适配C++工程化环境）：          
      

16. MaxwellProjectParser（项目文件解析）：开发MaxwellProjectAnalyzer类，识别.aedt/.aedtz文件格式，解析项目目录结构，提取项目元数据，识别仿真类型（2D/3D，静磁/瞬态等），调度其他子模块协同工作，支持自定义XML格式解析规则配置；补充开发Maxwell版本识别逻辑、自动保存文件（.aedt.auto）解析逻辑、参数化扫描元数据解析逻辑，新增脚本元数据提取功能，调度子模块同步解析Maxwell专属数据及附属资源文件。

17. GeometryExtractor（几何模型提取）：开发GeometryImporter类，支持SAT/STEP/Parasolid几何导入，解析Maxwell内部几何表示，提取面、边、顶点拓扑关系，转换到求解器坐标系，处理布尔运算结果，输出GeometryData格式数据；补充开发Maxwell用户自定义原语（UDP）几何数据的解析逻辑，提取UDP相关元数据，支持蒙皮深度网格、损耗自适应网格的元数据提取，确保几何数据与Maxwell原生数据完全对齐。

18. MaterialPropertyReader（材料属性读取）：开发MaterialReader类，解析材料库文件(.amat)，提取各向异性/非线性材料属性、BH曲线数据、电导率、介电常数、温度相关参数，输出MaterialData格式数据，同步到MaterialManager；补充开发磁芯损耗模型数据解析逻辑（支持斯坦梅茨方程参数、coreloss_user.data自定义数据读取），支持BH曲线平滑处理参数提取，实现材料附属文件（.dat/.txt）的关联解析与路径映射，确保材料数据无遗漏。

19. BoundaryConditionParser（边界条件解析）：开发BoundaryConditionParser类，解析主从边界、奇偶对称边界、气球边界、阻抗边界、辐射边界等，转换到求解器边界条件格式，输出BoundaryData格式数据，同步到BoundaryManager；补充开发Maxwell对称边界（Perfect H/Perfect E）、无限球辐射边界的专属参数解析逻辑，提取边界细分参数、周期性映射参数，实现边界关联几何的精准解析，确保边界数据与Maxwell原生数据一致。

20. ExcitationDataReader（激励源数据读取）：开发ExcitationReader类，解析线圈绕组定义、并联/串联连接、电流/电压源设置、绕组函数，以及运动边界条件、旋转/平移设置、机械耦合参数、外部电路元件参数与控制策略，输出ExcitationData格式数据，同步到ExcitationManager；补充开发时变激励波形参数解析逻辑（支持正弦/方波/自定义波形，提取采样点、频率、幅值），支持自定义波形文件（.txt）的关联解析与路径映射，提取线圈串并联支路数、绕组函数细节参数，确保激励数据完整。

21. MeshDataExtractor（网格数据提取，可选）：开发MeshDataExtractor类，读取Maxwell生成的体网格、面网格数据，提取网格质量指标、边界层信息，输出MeshData格式数据；补充提取蒙皮深度网格元数据、损耗自适应网格元数据，解析Maxwell网格质量评估参数，确保网格数据与Maxwell原生数据一致。

22. SolverSettingsAdapter（求解设置适配）：开发SolverSettingsAdapter类，读取Maxwell自适应网格划分设置、收敛准则、求解器类型选择、输出变量设置、后处理请求，转换为目标格式，同步存储到SolverSettings数据类；补充开发Maxwell HPC配置参数解析逻辑（多核并行、分布式计算、GPU加速相关设置），提取收敛准则细节参数（如非线性残差阈值、迭代次数），仅存储配置数据，不涉及求解逻辑。

23. 多格式支持开发：支持Maxwell项目文件（.aedt/.aedtz/.xml/.amat/.aedt.auto）读取，支持自研自定义XML格式读取，适配不同格式的数据解析逻辑，统一转换为MaxwellDataModel数据模型，确保数据格式兼容无丢失；补充适配Maxwell多版本文件格式，实现不同版本数据的自动适配解析，支持Parasolid几何格式、coreloss_user.data、自定义波形.txt等附属格式的读取。

24. 读取模块联动测试：确保读取模块与ProjectManager、材料/边界/激励/几何模块联动正常，读取的数据能准确同步到对应管理器，数据模型存储无误，支持后续数据保存与导出；补充测试Maxwell专属数据、附属资源文件、多版本文件的读取与同步联动，测试自动保存文件的加载逻辑，确保联动无异常。

25. Maxwell Project兼容开发（导出+格式适配）

26. 开发框架项目导出为Maxwell XML工具，将.emf项目包数据（MaxwellDataModel模型数据）转换为Maxwell兼容格式，确保可在Maxwell中打开、识别；补充导出Maxwell专属数据（磁芯损耗模型、HPC配置、时变激励波形等），确保导出数据包含所有Maxwell专属参数，附属资源文件同步导出并建立正确关联。

27. 适配Maxwell Project文件命名规范、数据格式，解决导入/导出过程中的数据丢失、格式不兼容问题，重点适配读取模块支持的各类格式；补充适配Maxwell多版本导出格式，确保导出文件可在对应版本Maxwell中正常打开，解决附属资源文件导出后的路径关联问题。

28. 用Maxwell标准项目文件做测试，验证导入/导出的准确性，确保核心数据无偏差，数据可正常复用；补充用Maxwell多版本标准项目、自定义附属资源项目做测试，验证专属数据、附属资源文件的导入/导出准确性。

29. Project数据全生命周期优化

30. 实现自动备份功能，保存项目时生成备份文件，保留最近3个备份，防止数据丢失；补充实现Maxwell自动保存文件（.aedt.auto）的备份逻辑，确保自动保存数据可同步备份，新增备份文件的版本标识，便于区分不同版本备份。

31. 实现操作日志追溯，记录所有数据操作（创建/修改/删除/读取导入），便于问题排查；补充记录Maxwell专属数据、附属资源文件的操作日志（如磁芯损耗数据修改、波形文件导入），记录Maxwell文件版本信息、解析过程中的关键步骤，提升问题排查效率。

32. 优化大项目加载/保存速度，实现按需加载（大体积数据分片加载）、内存分片管理，避免内存溢出；补充优化Maxwell大体积附属资源文件、多版本文件的加载速度，采用预加载索引、分片解析的方式，提升加载效率。

33. 开发项目批量处理接口，支持批量加载/保存/导入/导出多项目，适配工程化多算例数据管理需求，支持批量读取Maxwell项目文件；补充支持批量读取Maxwell自动保存文件、批量导入/导出Maxwell附属资源文件，优化批量处理的并发逻辑，提升处理效率。

## 技术要求

1. ProjectManager接口稳定，项目创建/加载/保存/读取导入无异常，增量保存比全量保存快80%以上；补充要求Maxwell自动保存文件加载无异常，专属数据、附属资源文件的同步的准确率≥99%，批量处理无数据错乱。

2. .emf项目包可移植，复制到任意路径可正常加载，二进制数据无损坏，序列化/反序列化无数据丢失；补充要求附属资源文件的相对路径映射无误，移植后可正常读取，Maxwell专属数据的序列化/反序列化无精度损失。

3. Maxwell项目数据读取模块支持.aedt/.aedtz/.xml/.amat格式及自研自定义XML格式，读取准确率≥99%，核心数据（材料/边界/激励/几何）无偏差，读取后能准确同步到MaxwellDataModel数据模型及对应管理器；补充要求支持.aedt.auto、Parasolid、coreloss_user.data、自定义波形.txt等格式，Maxwell专属数据（磁芯损耗、HPC配置等）读取准确率≥99%，多版本文件读取适配无异常。

4. 读取模块各子模块接口统一，支持单独调用，异常处理完善，能抛出明确的读取错误提示（如文件损坏、格式不支持）；补充要求子模块支持Maxwell专属数据、附属资源文件的解析，异常提示包含Maxwell专属数据的错误细节（如磁芯损耗参数异常、波形文件缺失），便于快速定位问题。

5. 大项目（节点数100万+）加载时间≤30s，保存时间≤60s，无内存溢出，按需加载功能正常；补充要求大体积附属资源文件（如100万行BH曲线数据）加载时间≤10s，分片加载无卡顿，内存占用控制在合理范围。

6. Maxwell XML导入/导出准确，导出文件可在Maxwell中正常打开、识别；补充要求导出文件包含所有Maxwell专属数据、附属资源文件，导出格式适配Maxwell对应版本，无数据丢失或格式错乱。

## 交付物

1. ProjectManager完整代码、.emf打包/解包工具代码；补充交付Maxwell自动保存文件加载代码、附属资源文件管理代码、批量处理并发优化代码。

2. Maxwell项目数据读取模块完整代码（含7个子模块、MaxwellDataModel数据模型）及注释；补充交付Maxwell专属数据解析、附属资源文件解析、多版本适配相关的代码及注释。

3. Maxwell XML导入/导出工具代码、多格式适配文档、兼容测试报告；补充交付Maxwell多版本兼容文档、附属资源文件导入/导出说明文档、自动保存文件加载测试报告。

4. Project数据备份、日志追溯、批量处理功能代码；补充交付Maxwell专属数据操作日志代码、自动保存文件备份代码、批量导入/导出附属资源文件代码。

5. Project文件管理接口文档、读取模块使用手册、测试用例（覆盖率≥95%）；补充交付Maxwell专属数据解析接口文档、附属资源文件管理使用手册、多版本测试用例及对比测试报告。

6. MaxwellDataModel数据模型设计文档、读取模块与其他模块的对接文档；补充交付Maxwell专属数据模型扩展说明文档、多版本文件适配对接说明文档。

## 风险与应对

风险1：Maxwell XML文件、.aedt/.aedtz文件解析复杂，易出现数据读取偏差；应对：分节点逐步解析XML，拆解.aedt/.aedtz文件结构，建立解析缓存，参考Maxwell官方文档补充解析逻辑，用标准算例逐一场景调试。补充风险1：Maxwell多版本文件格式差异导致解析异常；应对：梳理各版本格式差异，在解析模块中添加版本识别与适配逻辑，多版本测试用例全覆盖，针对差异点开发专属解析代码。

风险2：多格式适配冲突、读取数据无法同步到数据模型；应对：制定统一的数据格式映射规则，完善MaxwellDataModel数据模型的兼容性，增加数据转换中间层，读取后先校验数据格式，再同步到对应管理器，添加数据同步失败的异常处理。补充风险2：附属资源文件格式多样、路径关联复杂，导致读取/导出失败；应对：制定Maxwell附属资源文件的格式校验与路径映射规则，开发专属解析与导出逻辑，添加路径关联异常的降级处理，确保核心数据正常读取/导出。

风险3：大项目加载卡顿；应对：优化二进制数据分块大小，采用按需加载减少内存占用，优化读取模块的解析效率，避免冗余数据读取。补充风险3：Maxwell专属数据（如磁芯损耗、HPC配置）解析逻辑复杂，易出现偏差；应对：严格参考Maxwell官方文档，提取核心解析规则，开发针对性解析逻辑，用自定义测试用例逐参数调试，确保解析准确性。

# 第五阶段：集成测试与性能优化（第0.2个月）

## 阶段目标

完成项目数据读取与保存全流程集成测试，排查模块间协同冲突，优化数据读取、保存的性能与鲁棒性，确保所有功能满足工程化落地要求，数据读取准确、保存可靠。

## AI核心开发任务

1. 全流程集成测试

2. 搭建全流程测试场景，覆盖所有维度（2D/3D/AXIS）、所有支持格式（Maxwell .aedt/.aedtz/.xml/.amat/.aed
> （注：文档部分内容可能由 AI 生成）